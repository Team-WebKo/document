본 문서는 카카오 디벨로퍼에서 제공하는 카카오 로그인 공식 문서를 이해하기 위해 정독한 내용을 요약한 문서입니다.

공식 문서 링크는 https://developers.kakao.com/docs/latest/ko/kakaologin/common#login-token 입니다.

# 기능 소개

카카오 로그인은 카카오 계정을 통해 다양한 서비스에 로그인할 수 있도록 하는 OAuth2 기반 소셜 로그인 서비스입니다.

카카오 로그인 사용자는 다른 서비스에서 별도의 회원가입 없이 카카오톡, 카카오계정으로 로그인할 수 있습니다.

서비스 제공자(개발자)는 사용자의 개인정보를 직접 저장하거나 관리할 필요 없이, 사용자 인증 정보를 전달받아 활용할 수 있습니다. 이에 해당하는 기술이 OAuth2.0입니다.

### 카카오 로그인을 사용하려면 카카오 디벨로퍼스 앱이 필요합니다. 이는 우리 서비스를 카카오 어플리케이션으로 등록하는 과정과, 이후 로그인 활성화 설정, Redirect URI 등록 등의 과정을 거쳐야 합니다.

![img](https://developers.kakao.com/docs/latest/ko/assets/style/images/kakaologin/kakaologin.png)

<카카오 로그인 사용 화면 예시>

그 외에, 확장 기능으로 정보 제공 동의와 서비스 약관을 한 번에 확인/동의하고 별도 정보 입력 없이 서비스에 가입하는 '간편가입' 기능을 제공하는 '카카오싱크' 를 제공합니다.

### 간편가입 기능을 사용하려면 기본적으로 카카오 로그인을 필수 구현해야 하며, 추가 약관, 추가 동의 항목 제공 등의 추가적인 작업이 필요합니다.

# 도입 안내

카카오 로그인은 카카오디벨로퍼스 앱으로 등록한 후 개발이 가능합니다. 더불어 REST API, JavaScript, SDK 등 다양한 환경을 제공합니다. 이 중에서도 PC로 이용 가능한 REST API 및, 모바일 웹에서 간편로그인이 가능한 Javascript를 통한 구현을 계획 중에 있습니다.

![img](https://developers.kakao.com/docs/latest/ko/assets/style/images/kakaologin/kakaologin_sequence.png)

<REST API 방식을 통한 카카오 로그인 과정>

### 1. 인가 코드 받기

일반적으로 사용자에게 보이는 뷰 단계에서 진행되는 절차로, 사용자가 '카카오로 로그인' 버튼을 누른 후 정보 제공 동의를 지나 로그인을 요청하는 단계입니다. 카카오 로그인 등의 화면을 호출하고 사용자의 동의를 거치면 사용자가 동의한 정보들을 담은 인가 코드를 발행합니다. 이 인가 코드를 사용하여 실제 로그인에 필요한 '토큰' 을 요청할 수 있습니다.

인가 코드 받기 요청 시, 웹 브라우저 상의 카카오계정 세션 존재 여부에 따라 다르게 동작합니다.

A. 카카오 계정 세션이 없는 경우 : 사용자가 카카오계정 정보를 입력하거나 카카오톡으로 인증하는 과정을 거친 후 동의 화면을 출력합니다.

B. 카카오 계정 세션이 없는 경우 : 카카오계정 로그인 과정을 거치지 않고 바로 동의 화면을 출력합니다.

위 요청이 끝나면, 요청 처리 결과를 담은 쿼리 문자열을 HTTP 302로 리다이렉트 시킵니다.

** HTTP 302 리다이렉트란? 특정 URL 요청이 있은 후, 다른 URL로 '임시로' 리디렉션 시킬 때 사용합니다. 카카오 로그인 페이지 측에서 사용자 동의 이후 진행되는 로그인 과정(필요한 인가 코드 요청 / URL 형태로 전달받은 요청 결과물에서 토큰 발급을 위한 쿼리스트링 추출 / 토큰 요청 후 로그인 완료/ 로그인 완료 후 우리 서비스의 로그인 완료 페이지 이동)은 사용자가 별도로 조작하거나 확인하지 않고 내부에서 자동적으로 여러 URL을 거쳐 진행되는데, 이 정해진 흐름을 거쳐가기 위한 방식으로써 사용됩니다.

### 2. 토큰 받기

POST 형식으로 https://kauth.kakao.com/oauth/token URL에 요청을 넣어 토큰을 발급합니다. 필수 파라미터는 아래 링크 참고를 부탁 드립니다.

https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api#request-token

위 요청을 통해 기본적으로 액세스 토큰을 발급받을 수 있으며, 추가적으로 OpenIDConnect를 사용하는 앱일 경우 ID토큰까지 함께 발급받을 수 있습니다.

** 액세스 토큰이란? 간단히 얘기하면 입장권으로, 인증을 마친 후 특정 리소스에 접근하는 '권한' 을 부여하는 토큰입니다.

** ID 토큰이란? 간단히 얘기하면 신분증으로, 인증을 마친 사용자에 대한 '정보' 를 가지고 있는 보안 토큰입니다.
